<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Incentive Calculator</title>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f8f9fa;
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      transition: background 0.5s, color 0.5s;
    }

    /* Header */
    .header {
      width: 90%;
      max-width: 650px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 30px;
      margin-bottom: 10px;
    }
    .header-left {
      display: flex;
      align-items: center;
      font-size: 16px;
      font-weight: bold;
    }
    .header-left span.version {
      font-size: 14px;
      font-weight: normal;
      color: #555;
      margin-left: 8px;
      transition: color 0.5s;
    }
    .dark-mode-btn {
      cursor: pointer;
      font-size: 22px;
      color: #00796B;
      transition: color 0.5s;
      user-select: none;
    }

    /* Rest same as before */
    h1 {
      margin: 0;
      font-size: 28px;
      color: #00796B;
      transition: color 0.5s;
    }
    .container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      padding: 30px;
      width: 90%;
      max-width: 650px;
      margin-bottom: 30px;
      transition: background 0.5s, color 0.5s, box-shadow 0.5s;
    }
    label { display: block; margin-top: 15px; font-weight: 600; }
    input { width: 100%; padding: 10px; margin-top: 5px; border: 1px solid #ccc; border-radius: 10px; font-size: 16px; transition: background 0.5s, color 0.5s, border 0.5s; }
    button { margin-top: 20px; background-color: #00BFA6; color: white; border: none; padding: 12px 20px; border-radius: 10px; font-size: 16px; cursor: pointer; width: 100%; transition: background 0.3s; }
    button:hover { background-color: #009E8C; }
    .results { margin-top: 25px; padding-top: 10px; border-top: 1px solid #ddd; line-height: 1.8; }
    .dark-blue { color: #0047AB; font-weight: bold; font-style: italic; transition: color 0.5s; }
    .dark-brown { color: #5C4033; font-weight: bold; font-style: italic; transition: color 0.5s; }
    .dark-salem { color: #00796B; font-weight: bold; transition: color 0.5s; }
    .projected { font-size: 0.9em; color: #666; font-style: italic; margin-top: 10px; line-height: 1.5; transition: color 0.5s; }
    .quote { margin-top: 20px; padding: 12px; background-color: #f0f4f4; border-left: 5px solid #00796B; font-style: italic; color: #444; border-radius: 8px; font-size: 14px; transition: background 0.5s, color 0.5s, border-left-color 0.5s; }

    /* Dark Mode */
    body.dark {
      background: #121212;
      color: #e0e0e0;
    }
    body.dark .header-left span.version { color: #ccc; }
    body.dark .dark-mode-btn { color: #00bfa6; }
    body.dark .container { background: #1e1e1e; color: #e0e0e0; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
    body.dark input, body.dark button { background: #2c2c2c; color: #fff; border: 1px solid #555; }
    body.dark .dark-blue { color: #3399ff; }
    body.dark .dark-brown { color: #b36b00; }
    body.dark .dark-salem { color: #00bfa6; }
    body.dark .quote { background-color: #2c2c2c; color: #ccc; border-left-color: #00bfa6; }

  </style>
</head>
<body>
  <div class="header">
    <div class="header-left">Smart Incentive Calculator <span class="version">v1.5</span></div>
    <div class="dark-mode-btn" id="darkModeBtn" onclick="toggleDarkMode()">‚òÄÔ∏è</div>
  </div>

  <div class="container">
    <label for="salesTarget">Sales Target (AED):</label>
    <input type="number" id="salesTarget" placeholder="Enter sales target" />

    <label for="totalSales">Total Sales (AED):</label>
    <input type="number" id="totalSales" placeholder="Enter total sales made" />

    <label for="personalSales">Personal Sales (AED):</label>
    <input type="number" id="personalSales" placeholder="Enter your personal sales" />

    <label for="salesPersons">Number of Salespersons:</label>
    <input type="number" id="salesPersons" value="25" />

    <button onclick="calculateIncentive()">Calculate</button>

    <div class="results" id="results"></div>
  </div>

  <script>
    const darkModeBtn = document.getElementById('darkModeBtn');

    function toggleDarkMode() {
      document.body.classList.toggle('dark');
      darkModeBtn.textContent = document.body.classList.contains('dark') ? 'üåô' : '‚òÄÔ∏è';
    }

    async function getRandomQuoteOnline() {
      try {
        const res = await fetch("https://zenquotes.io/api/random");
        const data = await res.json();
        return `${data[0].q} ‚Äî ${data[0].a}`;
      } catch (err) {
        const fallback = [
          "Every sale brings you closer to your next success.",
          "Push a little harder‚Äîyour future self will thank you.",
          "The harder you work, the luckier you get.",
          "Sell smart, not hard. The incentive will follow."
        ];
        return fallback[Math.floor(Math.random() * fallback.length)];
      }
    }

    async function calculateIncentive() {
      const salesTarget = parseFloat(document.getElementById('salesTarget').value);
      const totalSales = parseFloat(document.getElementById('totalSales').value);
      const personalSales = parseFloat(document.getElementById('personalSales').value);
      const salesPersons = parseFloat(document.getElementById('salesPersons').value);

      if (!salesTarget || !totalSales || !personalSales || !salesPersons) {
        document.getElementById('results').innerHTML = "<span style='color:red;'>Please fill all fields</span>";
        return;
      }

      const totalPercent = (totalSales / salesTarget) * 100;
      let tier = "";
      let tierPercent = 0;
      if (totalPercent >= 85 && totalPercent <= 100) { tier = "Tier 1 (2.5%)"; tierPercent = 0.025; }
      else if (totalPercent >= 101 && totalPercent <= 110) { tier = "Tier 2 (3%)"; tierPercent = 0.03; }
      else if (totalPercent >= 111) { tier = "Tier 3 (3.5%)"; tierPercent = 0.035; }
      else { tier = "Below Target (No Incentive)"; tierPercent = 0; }

      const totalIncentivePool = totalSales * tierPercent;
      const equalSplit = (totalIncentivePool * 0.7) / salesPersons;
      const personal30 = (personalSales / totalSales) * (totalIncentivePool * 0.3);
      const currentIncentive = equalSplit + personal30;
      const personalPercent = ((personalSales / totalSales) * 100).toFixed(3);

      const extraSale = 1695;

      // Projection calculations (same as before)
      const newTotalSalesYou = totalSales + extraSale;
      const newPersonalSalesYou = personalSales + extraSale;
      const newTotalPercentYou = (newTotalSalesYou / salesTarget) * 100;
      let newTierPercentYou = 0;
      if (newTotalPercentYou >= 85 && newTotalPercentYou <= 100) newTierPercentYou = 0.025;
      else if (newTotalPercentYou >= 101 && newTotalPercentYou <= 110) newTierPercentYou = 0.03;
      else if (newTotalPercentYou >= 111) newTierPercentYou = 0.035;
      const newIncentivePoolYou = newTotalSalesYou * newTierPercentYou;
      const newEqualSplitYou = (newIncentivePoolYou * 0.7) / salesPersons;
      const newPersonal30You = (newPersonalSalesYou / newTotalSalesYou) * (newIncentivePoolYou * 0.3);
      const projectedIncentiveYou = newEqualSplitYou + newPersonal30You;
      const differenceYou = projectedIncentiveYou - currentIncentive;

      const newTotalSalesOther = totalSales + extraSale;
      const newPersonalSalesOther = personalSales;
      const newTotalPercentOther = (newTotalSalesOther / salesTarget) * 100;
      let newTierPercentOther = 0;
      if (newTotalPercentOther >= 85 && newTotalPercentOther <= 100) newTierPercentOther = 0.025;
      else if (newTotalPercentOther >= 101 && newTotalPercentOther <= 110) newTierPercentOther = 0.03;
      else if (newTotalPercentOther >= 111) newTierPercentOther = 0.035;
      const newIncentivePoolOther = newTotalSalesOther * newTierPercentOther;
      const newEqualSplitOther = (newIncentivePoolOther * 0.7) / salesPersons;
      const newPersonal30Other = (newPersonalSalesOther / newTotalSalesOther) * (newIncentivePoolOther * 0.3);
      const projectedIncentiveOther = newEqualSplitOther + newPersonal30Other;
      const differenceOther = projectedIncentiveOther - currentIncentive;

      const quote = await getRandomQuoteOnline();

      document.getElementById('results').innerHTML = `
        <div><span>Incentive Tier:</span> ${tier}</div>
        <div><span>Equal Split (70%):</span> <span class="dark-blue">AED ${equalSplit.toFixed(3)}</span></div>
        <div><span>Personal Sales %:</span> ${personalPercent}%</div>
        <div><span>Personal 30%:</span> <span class="dark-brown">AED ${personal30.toFixed(3)}</span></div>
        <div><span>Total Sales Incentive:</span> <span class="dark-salem">AED ${currentIncentive.toFixed(2)}</span></div>

        <div class="projected">
          <div>If <strong>you</strong> sold an extra package of AED ${extraSale}:</div>
          <div>Projected Incentive: AED ${projectedIncentiveYou.toFixed(2)}</div>
          <div>Difference: ${differenceYou >=0 ? '+' : ''}${differenceYou.toFixed(2)} AED</div>

          <div style="margin-top:8px;">If <strong>someone else</strong> sold an extra package of AED ${extraSale}:</div>
          <div>Projected Incentive: AED ${projectedIncentiveOther.toFixed(2)}</div>
          <div>Difference: ${differenceOther >=0 ? '+' : ''}${differenceOther.toFixed(2)} AED</div>
        </div>

        <div class="quote">${quote}</div>
      `;
    }
  </script>
</body>
</html>
